var auditTrailAuthors=[],requestItemTable,RowID=1,requestsMap={},addingRow=!1,preSelect,allReqItemTbls=[],drawTimeout="",requestItemTableNames=[],genRichText,fieldsReady=!1;function setBrowserObject(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},browser={},(matched=jQuery.uaMatch(navigator.userAgent)).browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser}window.unsavedChangesNotificationOpen=!1,window.cdIdStructureData={},window.requestFieldsSectionPopulatedForDupRequest=!1,$(document).ready((function(){function makeid(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}window.self!=window.top&&$("body").addClass("inIframe"),$.notifyDefaults({placement:{from:"bottom",align:"right"},animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}}),$("table#requestTypeAllowedUsersTable").on("scroll",(function(){$("table#requestTypeAllowedUsersTable > *").width($("table#requestTypeAllowedUsersTable").width()+$("table#requestTypeAllowedUsersTable").scrollLeft())})),$("table#requestTypeAllowedGroupsTable").on("scroll",(function(){$("table#requestTypeAllowedGroupsTable > *").width($("table#requestTypeAllowedGroupsTable").width()+$("table#requestTypeAllowedGroupsTable").scrollLeft())})),$.fn.dataTable.ext.errMode="none",$("body").on("click",".structureImageContainer",(function(event){$(".isCheckedOut")[0]||utilities().showUnsavedChangesNotification()})),$("body").on("click",".repeatThisRequestButton",(function(event){var requestId=$(this).closest(".requestEditorContainer").attr("requestid");window.location="/arxlab/workflow/repeatRequest.asp?requestid="+requestId})),$(document).on("click","#requestNotificationsList",(function(e){e.stopPropagation()})),$(window).resize((function(){utilities().resizeManageRequestsTable().then((function(){if(window.self!=window.parent){var heightToUse=Math.max($(".col-md-12").height(),$(".container-fluid").height());window.parent.$("#tocIframe").height()!=heightToUse&&utilities().resizeCustExpIframe()}})),$("#dropdownsTable").width($("div.col-sm-12").width())})),$("body").on("keydown",".dropdownEditorContainer.makeVisible input, .dropdownEditorContainer.makeVisible select:not(#requestTypeDropdown, #assignedUserGroupDropdown), .dropdownEditorContainer.makeVisible textarea",(function(event){var uniquID="";null==event.target.attributes.uniqueIdentifyer?(uniquID=makeid(10),event.target.attributes.uniqueIdentifyer=uniquID):uniquID=event.target.attributes.uniqueIdentifyer,null==window.top.originalObj&&(window.top.originalObj={}),null==window.top.changeObj&&(window.top.changeObj={}),null==window.top.originalObj[uniquID]&&(window.top.originalObj[uniquID]=event.target.value),window.top.changeObj[uniquID]=event.target.value})),$("body").on("keyup",".dropdownEditorContainer.makeVisible input, .dropdownEditorContainer.makeVisible select:not(#requestTypeDropdown, #assignedUserGroupDropdown), .dropdownEditorContainer.makeVisible textarea",(function(event){var uniquID=event.target.attributes.uniqueIdentifyer;if(window.top.originalObj[uniquID]!=event.target.value)utilities().showUnsavedChangesNotification();else{window.top.changeObj[uniquID]="";var change=!1;$.each(window.top.changeObj,(function(k,val){""!=val&&(change=!0)})),0==change&&utilities().closeUnsavedChangesNotification()}})),$("body").on("change",".dropdownEditorContainer.makeVisible input, .dropdownEditorContainer.makeVisible select:not(#requestTypeDropdown, #assignedUserGroupDropdown), .dropdownEditorContainer.makeVisible textarea",(function(event){var thisValueMoment,thisElementClasses,thisElementClasses;"7"==$(this).closest(".editorField").attr("datatypeid")?moment.utc($(this).val(),"MM/DD/YYYY").isValid()?window.self!=window.top?void 0===(thisElementClasses=$(this).attr("class"))?utilities().showUnsavedChangesNotification($(this)):thisElementClasses.split(/\s+/).indexOf("avoidTriggeringChangeListener")<0&&utilities().showUnsavedChangesNotification($(this)):utilities().showUnsavedChangesNotification($(this)):$(this).val(""):window.self!=window.top?void 0===(thisElementClasses=$(this).attr("class"))?utilities().showUnsavedChangesNotification($(this)):thisElementClasses.split(/\s+/).indexOf("avoidTriggeringChangeListener")<0&&utilities().showUnsavedChangesNotification($(this)):$(this).closest("div").hasClass("dataTables_length")||utilities().showUnsavedChangesNotification($(this));if(window.self!=window.top){var editorFieldHolder=$(this).parent().parent(),datatypeid=parseInt(editorFieldHolder.attr("datatypeid")),requestTypeFieldId=editorFieldHolder.attr("requesttypefieldid");if(isNaN(datatypeid)||void 0===requestTypeFieldId)return;var inputIds=[1,2,3,4,7],selectIds=[5,11,12],ckeditorIds=[9],val="";if(editorFieldHolder.children().length>2){var valArray=[],childClass="editorField";inputIds.indexOf(datatypeid)>=0?childClass+="Input":selectIds.indexOf(datatypeid)>=0&&(childClass+="Dropdown");var selectorString,children=$(`.editorField[requesttypefieldid=${requestTypeFieldId}] > .editorFieldInputContainer > .${childClass}`);$.each(children,(function(childIndex,child){var childVal;$(child).val()&&valArray.push($(child).val())})),val=valArray.join("|||")}else val=$(this).val();window.top.canWrite&&window.parent.sendAutoSave(requestTypeFieldId,val)}})),$("body").on("click",".dropdownEditorSubmit, .dropdownEditorCancel, .requestEditorSubmit, .requestEditorCancel",(function(event){if(utilities().closeUnsavedChangesNotification(),"/arxlab/workflow/viewIndividualRequest.asp"==window.location.pathname)try{viewIndividualRequest(requestId,0)}catch{window.location.href=window.location.href}})),$("body").on("click",".previewStructuresButton",(function(event){$(this).closest("tr").siblings("tr").removeClass("activeRow"),requestId=parseInt($(this).closest("tr").addClass("activeRow").attr("requestid")),$("ul.requestItemStructurePreviewList").find("li.card").remove(),$("div#prioritizeThisRequestTableModal").addClass("showRequestItemStructurePreviewList"),$("ul.requestItemStructurePreviewList").addClass("loadingStructureImages"),ajaxModule().loadRequestPreviewStructureImages(requestId)}));var allowedLinkSelectors,allowedLinkSelectorString=['[href="#"]','[href=""]','[href="javascript:void(0)"]',".csvdownload",".editStructureLink",".cke_button",".currentFileLink",".navigateLink",".clearLink"].map(x=>`:not(${x})`).join("");$("body").on("click",`a${allowedLinkSelectorString}`,(function(event){window.unsavedChangesNotificationOpen&&"_blank"!==$(this).attr("target")&&"configRequestNameAccord"!=this.id&&(window.clickedHref=$(this).attr("href"),event.stopPropagation(),event.preventDefault(),console.log("Prevented link from opening..."),window.parent.swal({title:"Are you sure?",text:"You are about to navigate away from this page while you still have unsaved changes.",type:"warning",confirmButtonText:"Discard Changes",cancelButtonText:"Cancel",showCancelButton:!0},(function(isConfirm){isConfirm&&(window.location=window.clickedHref)})))})),$(".modal").on("shown.bs.modal",(function(e){window.self!=window.parent&&$(".modal").css("top",utilities().calculateOffset())})),$("table#manageRequestsTable").on("mouseenter","td",(function(){$(this).attr("title",this.innerText)}));var isConfigManager=utilities().userIsMemberOfGroupByName("Configuration Managers");if(!isConfigManager){var user=window.usersList.filter(x=>x.id==globalUserInfo.userId);null!=user&&1==user[0].roleid&&(isConfigManager=!0)}var isDropDownManager=utilities().userIsMemberOfGroupByName("Business Administrators");(isConfigManager||isDropDownManager)&&($("#workflowAdminNavMenu").css("display","block"),isDropDownManager&&!isConfigManager&&$(".workflowAdminFields").css("display","none"))})),$(document).ready((function(){null==window.duplicatingRequest&&("repeatRequest"!=window.CurrentPageMode?window.duplicatingRequest=!1:window.duplicatingRequest=!0),setBrowserObject(),$("body").bind("paste",(function(e){var pastedData=e.originalEvent.clipboardData.getData("text"),tar=e.target;try{var $Tpar=$(tar).parent().parent().parent().parent();if("tbody"==$Tpar[0].localName){var table=$($Tpar).parent()[0],$td=$(e.target).closest("td"),$tr=$($td).closest("tr"),rowOn=$($tr).index();rowOn+=1;var msg=pastedData,colCount=table.rows[rowOn].cells.length,TypeKey=[];for(i=1;i<colCount;i++){var cellInteract=table.rows[rowOn].cells[i],UD=$(cellInteract).children().children()[0],thisTableCellDiv=$(UD).closest("div"),thisTableCellDataTypeId=parseInt(thisTableCellDiv.attr("datatypeid"));TypeKey.push(thisTableCellDataTypeId)}var twoD=[],data=[],ExIn=pastedData.split(String.fromCharCode(9));if(ExIn.length>1){for(i=0;i<ExIn.length;i++)data.length==colCount-1&&(twoD.push(data),(data=[]).push("")),ExIn[i]==String.fromCharCode(10)||ExIn[i]==String.fromCharCode(13)?data.push(""):data.push(ExIn[i]);for(data.length>0&&twoD.push(data),i=0;i<colCount;i++)if(5==TypeKey[i]){var cellInteract=table.rows[rowOn].cells[i+1],DDKey=$(cellInteract).children().children()[0];for(DDKey=$(DDKey).children(),td=0;td<twoD.length;td++)for(c=0;c<DDKey.length;c++)null!=twoD[td][i]&&twoD[td][i].toUpperCase().replace(" ","").replace(String.fromCharCode(13),"").replace(String.fromCharCode(10),"")==$(DDKey[c]).html().toUpperCase().replace(" ","")&&(twoD[td][i]=$(DDKey[c]).attr("value"))}console.log("IN:"+pastedData);var msg=twoD[0].join();for(i=1;i<twoD.length;i++){var Holder=twoD[i].join();Holder=Holder.replace(String.fromCharCode(13),""),msg=msg+","+String.fromCharCode(10)+","+Holder}$.ajax({type:"POST",url:"cpRequest.asp",async:!1,data:{msg:"03"+msg}}).done((function(response){dataTableModule().PasteRequest("04",rowOn,table)})),e.preventDefault(),console.log(pastedData)}}}catch(err){}})),setTimeout((function(){var tablesArray=$(".dataTables_scrollBody > .requestItemEditorTable");$.each(tablesArray,(function(){$(this).DataTable().draw()}))}),4e3),utilities().fetchNotificationCount();var notificationCountInterval=6e4;utilities().pollNotificationCount(6e4),$("#prioritizeThisRequestTable > tbody").sortable({placeholder:"ui-state-highlight",helper:"clone"}),$("body").on("click","#cancelPrioritizeNewRequestBtn",(function(event){$(".prioritizeNewRequestButton").attr("disabled",!1)}))}));var allStructures={};
//# sourceMappingURL=arxWorkflow.min.js.map