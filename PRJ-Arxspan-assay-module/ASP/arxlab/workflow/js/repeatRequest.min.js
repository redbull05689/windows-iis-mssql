function populateRequestEditorToDuplicateRequest(requestToDup,thisRequestType,versionedRequestItems,versionedFields){var duplicationInterval=window.setInterval((function(){if(void 0!==window.changingRequestTypeDropdown&&window.changingRequestTypeDropdown)return!1;window.clearInterval(duplicationInterval),console.log(requestToDup),console.log(thisRequestType);var assignedGroupId=requestToDup.assignedGroupId,assignedUserGroupDropdownOption;if(!assignedGroupId){if(!(globalUserInfo.userGroups.length>0))return swal("Error loading request","There was an error loading the request you're trying to repeat. Please contact Arxspan Support.","error"),!1;assignedGroupId=globalUserInfo.userGroups[0]}if(!$("select#assignedUserGroupDropdown").find('option[value="'+assignedGroupId.toString()+'"]:not(:disabled)'))return swal("Error loading request","There was an error loading the request you're trying to repeat. Please try refreshing the page or contact Arxspan Support.","error"),!1;var requestEditorDuplicationInterval=window.setInterval((function(){var selectorString=".editorSection[sectionid='requestFields']";if(0!=$(selectorString).length){window.clearInterval(requestEditorDuplicationInterval);var myDiv=$("<div/>"),fieldPromises=[];fieldPromises.push(requestEditorHelper.populateRequestFieldsSection(thisRequestType,selectorString,requestToDup,!0,versionedFields,versionedRequestItems)),fieldPromises.push(requestEditorHelper.populateRequestItemsEditorSectionInRequestEditor(requestToDup,thisRequestType,myDiv,versionedRequestItems,versionedFields)),Promise.all(fieldPromises).then((async function(fieldValues){var itemDiv=fieldValues[1];$(".requestEditorContainer .bottomButtons").before(itemDiv.children()),await dataTableModule().convertSavedRequestDataForDT(requestToDup,thisRequestType,versionedRequestItems,versionedFields),requestEditorHelper.populateDraftVals(thisRequestType,versionedRequestItems,versionedFields),"ELN"==window.top.currApp&&(window.parent.$("#basicLoadingModal").modal("hide"),window.parent.bindSaveShortcut()),$("#basicLoadingModal").modal("hide")}))}}),100)}),100)}function initDuplicateRequest(requestId){return $(".dropdownEditorContainer").attr("requestid",requestId),new Promise((function(resolve,reject){$("#basicLoadingModal").modal("show");var inputParams={getFieldData:!0,getItemData:!0,appName:"Workflow"};ajaxModule().getRequests(requestId,inputParams).then((function(response){if(void 0!==response){var request=response;ajaxModule().getVersionedConfigData(request.requestTypeId).then((function(f){window.top.versionedFields=f[0],window.top.versionedRequestItems=f[1],window.top.thisRequestType=f[2][0],$(".duplicatingRequestNotice .duplicateRequestName").text(request.requestName).attr("href","viewIndividualRequest.asp?requestid="+request.id),console.error("About to run populateRequestEditorToDuplicateRequest"),Promise.all(initNewRequestPromise).then((function(){var popReqPromises=[];popReqPromises.push(requestEditorHelper.finalizeRequestEditorInitialization()),Promise.all(popReqPromises).then((function(){requestEditorHelper.populateUserGroupsList().then(makeNewRequestModule().disableDisallowedAssignedUserGroups(window.top.thisRequestType)),window.parent.$("#submitRow").show(),populateRequestEditorToDuplicateRequest(request,window.top.thisRequestType,window.top.versionedRequestItems,window.top.versionedFields)}))}))}))}resolve(!0)})).then((function(){console.log("complete"),$("#basicLoadingModal").modal("hide")}))}))}$(document).ready((function(){makeNewRequestModule().showRequestEditor().then((function(){initDuplicateRequest(window.duplicateRequestId)}))}));
//# sourceMappingURL=repeatRequest.min.js.map